{"version":3,"sources":["webpack:///webpack/bootstrap 9bee91202ef0fb563d55","webpack:///./src/js/util/Eventable.js","webpack:///./src/js/util/extendConstructor.js","webpack:///./src/js/views/AppViewState.js","webpack:///./src/js/components/TodoAdd.js","webpack:///./src/js/components/TodoMain.js","webpack:///./src/js/components/TodosActionsBar.js","webpack:///./src/js/components/TodosList.js","webpack:///./src/js/components/TodosListModel.js","webpack:///./src/js/util/deviceDetector.js","webpack:///./~/uuid/lib/bytesToUuid.js","webpack:///./~/uuid/lib/rng-browser.js","webpack:///./~/uuid/v4.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/js/app.js","webpack:///./src/js/components/Filter.js","webpack:///./src/js/components/TodoItem.js","webpack:///./src/js/components/TodoModel.js","webpack:///./src/js/models/Storage.js","webpack:///./src/js/models/local.js","webpack:///./src/js/util/templateEngine.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;AChEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,6BAA6B;AACjD;AACA;;AAEA;AACA;AACA;AACA,2CAA2C,SAAS;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+CAA+C,SAAS;AACxD;AACA;AACA;AACA;AACA;;;;;;;;AC7CA;AAAA;AACA,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,YAAY,SAAS;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACVA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yBAAyB,qBAAqB;AAC9C,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;AC7BA;AACA;;AAEA;AACA,gBAAgB;AAChB,aAAa;AACb,WAAW,YAAY;AACvB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,yCAAyC,kBAAkB;AAC3D;AACA;;AAEA;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;AAEA;;;;;;;;AC7EA;AACA,WAAW,YAAY;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,QAAQ;AACrB,eAAe;AACf;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;;AC7BA;AACA;AACA;;AAEA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,OAAO;AACpB,eAAe;AACf;AACA;AACA,iCAAiC,IAAI,MAAM,EAAE,+BAA+B,MAAM;AAClF;AACA;;AAEA;AACA,aAAa,QAAQ;AACrB,eAAe;AACf;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;AAEA;;;;;;;;;;;;AChFA;AACA;AACA;AACA;;AAEA;AACA,aAAa;AACb,WAAW,YAAY;AACvB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA,aAAa,UAAU;AACvB,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,eAAe;AACf;AACA;AACA,2CAA2C,SAAS;AACpD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,OAAO;AACpB,eAAe;AACf;AACA;AACA;AACA,2CAA2C,SAAS;AACpD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,UAAU;AACvB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,aAAa,OAAO;AACpB,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;;;;;;;;;;;;AC7IA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,2CAA2C,OAAO;AAClD;AACA;;AAEA;AACA,sDAAsD,OAAO;AAC7D;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA,sDAAsD,OAAO;AAC7D;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;;AAEA;AACA,OAAO;AACP;;AAEA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,SAAS;AACtB,aAAa,OAAO;AACpB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,QAAQ;AACrB;AACA,eAAe;AACf;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL,6FAA2C,eAAe;AAC1D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;AACA,aAAa,OAAO;AACpB,eAAe;AACf;AACA;AACA;AACA,kDAAkD,SAAS;AAC3D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,OAAO;AACpB,eAAe;AACf;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,eAAe;AACf;AACA;AACA;AACA,0CAA0C,SAAS;AACnD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe;AACf;AACA;AACA;AACA,oCAAoC,SAAS;AAC7C;AACA;AACA;AACA;AACA;AAAA;AAAA;;AAEA;;;;;;;;AC3OA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,oBAAoB,cAAc;AACjF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;AC1CA;AACA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACtBA;AACA;AACA;AACA;AACA;;AAEA,8CAA8C;AAC9C;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,QAAQ;AAC9B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;;AChCA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,SAAS;AAC7B;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;AC5BA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;;;;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;ACvFA;AACA;;AAEA;AACA,WAAW,YAAY;AACvB;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;;AAEA,6CAA6C,OAAO;AACpD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,YAAY;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;AAEA;;;;;;;;;;;AC1DA;AACA;AACA;;AAEA;AACA,aAAa;AACb,WAAW,UAAU;AACrB;AACA;AACA;AACA;AACA;;AAEA,+FAAwC,0BAA0B;;AAElE;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,YAAY;AACzB,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,OAAO;AACpB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,QAAQ;AACrB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,QAAQ;AACrB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,QAAQ;AACrB,eAAe;AACf;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;AAEA;;;;;;;;;;ACzJA;AACA;;AAEA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,OAAO;AACpB,aAAa,EAAE;AACf;AACA,eAAe;AACf;AACA;AACA;AACA;AACA,sCAAsC,6BAA6B;;AAEnE;AACA;;AAEA;AACA,aAAa,OAAO;AACpB,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA,aAAa,OAAO;AACpB,aAAa,SAAS;AACtB,aAAa,OAAO;AACpB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA,aAAa,SAAS;AACtB,aAAa,OAAO;AACpB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AAAA;AAAA;;AAEA;;;;;;;;;ACvEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;;;;;;;AC5CA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yE","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 13);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9bee91202ef0fb563d55","export default function Eventable() {}\n\nEventable.prototype._initEventable = function () {\n  this._eventable_registry = {};\n};\n\nfunction getEventSubscribers(eventable, eventName, needToCreate) {\n  let registry = eventable._eventable_registry;\n\n  if (eventName in registry) {\n    return registry[eventName];\n  } else if (needToCreate) {\n    return registry[eventName] = [];\n  }\n  return null;\n}\n\nEventable.prototype.on = function (eventName, handler, ctx) {\n  let subscribers = getEventSubscribers(this, eventName, true);\n  subscribers.push({ handler: handler, ctx: ctx });\n  return this;\n};\n\nEventable.prototype.off = function (eventName, handler, ctx) {\n  let subscribers = getEventSubscribers(this, eventName);\n  if (subscribers) {\n    for (let i = 0, l = subscribers.length; i !== l; i++) {\n      if ((subscribers[i].handler === handler) && (subscribers[i].ctx === ctx)) {\n        subscribers.splice(i, 1);\n        return this;\n      }\n    }\n  }\n  return this;\n};\n\nEventable.prototype.trigger = function (eventName, data) {\n  let subscribers = getEventSubscribers(this, eventName);\n  if (subscribers) {\n    let subscribersCopy = subscribers.slice();\n    for (let i = 0, l = subscribersCopy.length; i !== l; i++) {\n      subscribersCopy[i].handler.call(subscribersCopy[i].ctx, data);\n    }\n  }\n  return this;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/util/Eventable.js\n// module id = 0\n// module chunks = 0","/**\n * @param {Function} Extendable\n * @param {Function} Extension\n * @return {Function} Extendable\n */\nexport default function extendConstructor(Extendable, Extension) {\n  for (let p in Extension.prototype) {\n    Extendable.prototype[p] = Extension.prototype[p];\n  }\n  return Extendable;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/util/extendConstructor.js\n// module id = 1\n// module chunks = 0","import extendConstructor from '../util/extendConstructor';\nimport Eventable from '../util/Eventable';\n\nclass AppViewState {\n  constructor() {\n    this._initEventable();\n    this.filter = 'all';\n  }\n\n  onChange(handler, ctx) {\n    this.on('filterChanged', filterName => {\n      handler.call(ctx, { filter: filterName });\n    });\n  }\n\n  setFilter(filterName) {\n    this.filter = filterName;\n    this.trigger('filterChanged', filterName);\n    return this;\n  }\n\n  getFilter() {\n    return this.filter;\n  }\n}\n\nextendConstructor(AppViewState, Eventable);\nconst appViewState = new AppViewState();\n\nexport default appViewState;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/views/AppViewState.js\n// module id = 2\n// module chunks = 0","import extendConstructor from '../util/extendConstructor';\nimport Eventable from '../util/Eventable';\n\n/**\n * @implements {EventListener}\n * @extends {Eventable}\n * @param {HTMLElement} root\n * @constructor\n */\nexport default class TodoAdd {\n  constructor(root) {\n    this._initEventable();\n\n    this._root = root;\n    this._input = root.querySelector('.js-todo-add_input');\n    this._selectAllBtnWrapper = root.querySelector('.todo-add_select-all');\n    this._selectAllBtn = root.querySelector('.js-todo-add_select-all');\n\n    this._input.addEventListener('keypress', this);\n    this._selectAllBtnWrapper.addEventListener('keypress', this);\n    this._selectAllBtn.addEventListener('click', this);\n  }\n\n  /**\n   * @callback handleEvent\n   * @fires TodoAdd~selectAll\n   * @private\n   * @returns {Eventable}\n   */\n  _onSelectAll() {\n    /** @event TodoAdd#selectAll */\n    return this.trigger('selectAll');\n  }\n\n  /**\n   * @callback handleEvent\n   * @private\n   * @fires TodoAdd~todoCreate\n   * @returns {Eventable}\n   */\n  _onTodoAdd() {\n    let inputText = this._input.value.trim();\n\n    if (inputText.length !== 0) {\n      this._input.value = '';\n      this._input.blur();\n\n      /** @event TodoAdd#todoCreate */\n      return this.trigger('todoCreate', { text: inputText });\n    }\n  }\n\n  /**\n   * @returns {HTMLElement|*}\n   */\n  getRoot() {\n    return this._root;\n  }\n\n  handleEvent(e) {\n    switch (e.type) {\n      case 'click':\n        this._onSelectAll();\n        break;\n      case 'keypress':\n        if (e.keyCode === 13) {\n          if (e.target.closest('.js-todo-add_input')) {\n            this._onTodoAdd();\n          } else if (e.target.closest('.todo-add_select-all')) {\n            this._onSelectAll();\n          }\n        }\n        break;\n    }\n  }\n}\n\nextendConstructor(TodoAdd, Eventable);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/components/TodoAdd.js\n// module id = 3\n// module chunks = 0","/**\n * @param {HTMLElement} root\n * @constructor\n */\nexport default class TodosMain {\n  constructor(root) {\n    this._root = root;\n    this._todosMain = root.querySelector('.js-todos-main');\n  }\n\n  /**\n   * @param {Boolean} isVisible\n   * @returns {TodosMain}\n   */\n  updateInterfaceVisibility(isVisible) {\n    if (isVisible) {\n      this._todosMain.classList.remove('__empty');\n    } else {\n      this._todosMain.classList.add('__empty');\n    }\n    return this;\n  }\n\n  /**\n   * @returns {HTMLElement}\n   */\n  getRoot() {\n    return this._root;\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/components/TodoMain.js\n// module id = 4\n// module chunks = 0","import extendConstructor from '../util/extendConstructor';\nimport Eventable from '../util/Eventable';\nimport Filter from './Filter';\n\n/**\n * @implements {EventListener}\n * @param root\n * @constructor\n */\nexport default class TodosActionsBar {\n  constructor(root) {\n    this._initEventable();\n\n    /**\n     * @type {HTMLElement}\n     * @private\n     */\n    this._root = root;\n    this._counter = root.querySelector('.js-left-counter');\n    this._clearCompletedBtn = root.querySelector('.js-todos-actions-bar_clear-completed');\n    this._filters = new Filter(root.querySelector('.js-todos-actions-bar_filters'));\n\n    this._filters.on('filterSelect', this._onFilterSelected, this);\n\n    this._clearCompletedBtn.addEventListener('click', this);\n  }\n\n  /**\n   * @callback handleEvent\n   * @fires TodosActionsBar~filterSelected\n   * @private\n   * @returns {Eventable}\n   */\n  _onFilterSelected(filterName) {\n    /** @event TodosActionsBar#filterSelected */\n    return this.trigger('filterSelected', filterName);\n  }\n\n  /**\n   * @callback handleEvent\n   * @fires TodosActionsBar~clearCompleted\n   * @private\n   * @returns {Eventable}\n   */\n  _onClearCompleted() {\n    /** @event TodosActionsBar#clearCompleted */\n    return this.trigger('clearCompleted');\n  }\n\n  /**\n   * @param {Number} cnt\n   * @returns {TodosActionsBar}\n   */\n  setLeftTodosCount(cnt) {\n    this._counter.innerHTML = `${cnt}&nbsp;${(cnt === 1 ? 'item' : 'items')}&nbsp;left`;\n    return this;\n  }\n\n  /**\n   * @param {Boolean} isVisible\n   * @returns {TodosActionsBar}\n   */\n  manageClearCompletedVisibility(isVisible) {\n    if (isVisible) {\n      this._clearCompletedBtn.classList.remove('__hide');\n    } else {\n      this._clearCompletedBtn.classList.add('__hide');\n    }\n    return this;\n  }\n\n  handleEvent(e) {\n    switch (e.type) {\n      case 'click':\n        this._onClearCompleted();\n        break;\n    }\n  }\n}\n\nextendConstructor(TodosActionsBar, Eventable);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/components/TodosActionsBar.js\n// module id = 5\n// module chunks = 0","import extendConstructor from '../util/extendConstructor';\nimport Eventable from '../util/Eventable';\nimport TodoItem from './TodoItem';\nimport appViewState from '../views/AppViewState';\n\n/**\n * @extends {Eventable}\n * @param {HTMLElement} root\n * @constructor\n */\nexport default class TodosList {\n  constructor(root) {\n    this._initEventable();\n\n    this._root = root;\n    /**\n     * @type {Array.<TodoItem>}\n     * @private\n     *\n     */\n    this._items = [];\n    this._left = 0;\n  }\n\n  /**\n   * @returns {Number}\n   */\n  getTodosCount() {\n    return this._items.length;\n  }\n\n  /**\n   * @param {TodoModel} model\n   * @returns {TodosList}\n   */\n  addTodo(model) {\n    let item = new TodoItem(model);\n    this._items.push(item);\n\n    item\n      .on('todoChange', this._onTodoChange, this)\n      .render(this._root);\n\n    this.filterShowedItems();\n    return this;\n  }\n\n  /**\n   * @returns {TodosList}\n   */\n  clearCompleted() {\n    for (let i = 0, l = this._items.length; i !== l; i++) {\n      if (this._items[i]._model.get('isReady')) {\n        this._items[i].remove();\n      }\n    }\n    return this;\n  }\n\n  /**\n   * @param {Number} id\n   * @returns {TodoItem}\n   * @private\n   */\n  _getItemById(id) {\n    for (let i = 0, l = this._items.length; i !== l; i++) {\n      if (this._items[i]._model.get('id') === id) {\n        return this._items[i];\n      }\n    }\n    return null;\n  }\n\n  /**\n   * @callback addTodo\n   * @private\n   * @returns {TodosList}\n   */\n  _onTodoChange() {\n    this.filterShowedItems(appViewState.getFilter());\n    return this;\n  }\n\n  /**\n   * @param {TodoModel} model\n   * @returns {TodosList}\n   */\n  remove(model) {\n    let item = this._getItemById(model.get('id'));\n    if (item) {\n      item.off('todoChange', this._onTodoChange, this);\n      item.remove();\n      let itemIndex = this._items.indexOf(item);\n      this._items.splice(itemIndex, 1);\n    }\n\n    return this;\n  }\n\n  /**\n   * @returns {TodosList}\n   */\n  selectAll() {\n    this._items.forEach(item => {\n      item.changeReady(true);\n    });\n    return this;\n  }\n\n  /**\n   * @param {String} [filter]\n   * @returns {TodosList}\n   */\n  filterShowedItems(filter) {\n    if (!filter) {\n      filter = appViewState.getFilter();\n    }\n\n    this._items.forEach(item => {\n      switch (filter) {\n        case 'all':\n          item.visible(true);\n          break;\n        case 'completed':\n          item.visible(item._model.get('isReady'));\n          break;\n        case 'active':\n          item.visible(!item._model.get('isReady'));\n          break;\n      }\n    });\n    return this;\n  }\n\n  /**\n   * @returns {HTMLElement|*}\n   */\n  getRoot() {\n    return this._root;\n  }\n}\nextendConstructor(TodosList, Eventable);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/components/TodosList.js\n// module id = 6\n// module chunks = 0","import extendConstructor from '../util/extendConstructor';\nimport Eventable from'../util/Eventable';\nimport Storage from '../models/Storage';\nimport TodoModel from './TodoModel';\n\nconst uuidv4 = require('uuid/v4');\nconst StorageInstance = new Storage();\n/**\n * @constructor\n */\nexport default class TodosListModel {\n  constructor() {\n    this._initEventable();\n\n    /**\n     * @type {Array.<TodoModel>}\n     * @private\n     */\n    this._items_models = [];\n    this._left = 0;\n  }\n\n  updateList() {\n    StorageInstance.getEntriesList()\n      .then(data => {\n        const entries = data;\n\n        for (let i = 0, l = entries.length; i < l; i++) {\n          this.add(entries[i], true);\n        }\n\n        // I really don't know how to properly initialize model of ready item: ready changing listeners doesn't active while model is under construction\n        for (let i = 0, l = this._items_models.length; i < l; i++) {\n          if (this._items_models[i].get('isReady')) {\n            this._items_models[i].set('isReady', false);\n            this._items_models[i].set('isReady', true);\n          }\n        }\n      })\n      .catch(() => {\n        let data = [];\n        let elem;\n\n        for (let i = 0, l = this._items_models.length; i < l; i++) {\n          elem = this._items_models[i];\n          data.push({\n            id: elem.get('id'),\n            isReady: elem.get('isReady'),\n            text: elem.get('text')\n          });\n        }\n\n        StorageInstance.putEntriesList(data);\n      });\n  }\n\n  /**\n   * Returns list models.\n   * @returns {Array.<TodoModel>}\n   */\n  getList() {\n    return this._items_models;\n  }\n\n  /**\n   * @returns {Number}\n   */\n  getLeftTodosCount() {\n    return this._left;\n  }\n\n  /**\n   *\n   * @param {Function} handler\n   * @param {Object} [ctx]\n   * @returns {TodosListModel}\n   */\n  onChange(handler, ctx) {\n    this\n      .on('todoAdd', handler)\n      .on('todoRemoved', handler)\n      .on('todoChange', handler)\n      .on('modelReadyChange', model => {\n        switch (model.get('isReady')) {\n          case true:\n            if (this._left !== 0) {\n              this._left -= 1;\n            }\n            break;\n          case false:\n            this._left += 1;\n        }\n        this.trigger('todoChange');\n        handler.call(ctx);\n      }, this)\n      .on('modelRemove', model => {\n        this.remove(model.get('id'));\n        this.trigger('todoChange');\n        handler.call(ctx);\n      }, this)\n      .on('modelChange', () => {\n        this.trigger('todoChange');\n        handler.call(ctx)\n      }, this);\n\n    return this;\n  }\n\n  /**\n   *\n   * @param {Object} inputData\n   * @param {Boolean} fromStorage\n   * @fires TodosListModel~todoAdd\n   * @returns {TodosListModel}\n   */\n  add(inputData, fromStorage) {\n    let model;\n\n    if (inputData.id) {\n      model = new TodoModel(inputData);\n    } else {\n      model = new TodoModel(Object.assign({ id: uuidv4() }, inputData));\n    }\n\n    model.onAnyChange(data => {\n      switch(data['field']) {\n        case 'text':\n          this.trigger('modelTextChange', model);\n          break;\n        case 'isReady':\n          this.trigger('modelReadyChange', model);\n          break;\n        case 'deleted':\n          this.trigger('modelRemove', model);\n          break;\n        default:\n          this.trigger('modelChange', model);\n          break;\n      }\n      StorageInstance.changeListItem({\n        id: model.get('id'),\n        isReady: model.get('isReady'),\n        text: model.get('text')\n      });\n    }, this);\n\n    this._items_models.push(model);\n\n    if (model.get('isReady') === false) {\n      this._left += 1;\n    }\n\n    if (!fromStorage) {\n      StorageInstance.addListItem({\n        id: model.get('id'),\n        isReady: model.get('isReady'),\n        text: model.get('text')\n      });\n    }\n\n    /** @event TodosListModel#todoAdd */\n    this.trigger('todoAdd', model);\n    return this;\n  }\n\n  /**\n   * @param {Number} id\n   * @returns {TodoModel|null}\n   * @private\n   */\n  _getModelById(id) {\n    for (let i = 0, l = this._items_models.length; i !== l; i++) {\n      if (this._items_models[i].get('id') === id) {\n        return this._items_models[i];\n      }\n    }\n    return null;\n  }\n\n  /**\n   * @fires TodosListModel#todoRemove\n   * @fires TodosListModel#todoRemoved\n   * @param {Number} id\n   * @returns {TodosListModel}\n   */\n  remove(id) {\n    let model = this._getModelById(id);\n\n    if (model) {\n      if (!model.get('isReady')) {\n        this._left -= 1;\n      }\n\n      /** @event TodosListModel~todoRemove */\n      this.trigger('todoRemove', model);\n\n      model.off('modelFieldChange', this);\n\n      let modelIndex = this.getList().indexOf(model);\n      this.getList().splice(modelIndex, 1);\n\n      StorageInstance.removeListItem(id);\n\n      /** @event TodosListModel~todoRemoved */\n      this.trigger('todoRemoved');\n    }\n\n    return this;\n  }\n\n  /**\n   * @returns {TodosListModel}\n   */\n  clearCompleted() {\n    let copyModels = this.getList().slice();\n    for (let i = 0, l = copyModels.length; i !== l; i++) {\n      if (copyModels[i].get('isReady')) {\n        this.remove(copyModels[i].get('id'));\n      }\n    }\n    return this;\n  }\n\n  /**\n   * @returns {TodosListModel}\n   */\n  selectAll() {\n    const list = this.getList();\n    for (let i = 0, l = list.length; i !== l; i++) {\n      list[i].set('isReady', true);\n    }\n    return this;\n  }\n}\n\nextendConstructor(TodosListModel, Eventable);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/components/TodosListModel.js\n// module id = 7\n// module chunks = 0","const device = {};\nconst userAgent = window.navigator.userAgent.toLowerCase();\nconst find = needle => userAgent.indexOf(needle) !== -1;\n\ndevice.ios              = () => device.iphone() || device.ipod() || device.ipad();\ndevice.iphone           = () => !device.windows() && find('iphone');\ndevice.ipod             = () => find('ipod');\ndevice.ipad             = () => find('ipad');\ndevice.android          = () => !device.windows() && find('android');\ndevice.androidPhone     = () => device.android() && find('mobile');\ndevice.androidTablet    = () => device.android() && !find('mobile');\ndevice.blackberry       = () => find('blackberry') || find('bb10') || find('rim');\ndevice.blackberryPhone  = () => device.blackberry() && !find('tablet');\ndevice.blackberryTablet = () => device.blackberry() && find('tablet');\ndevice.windows          = () => find('windows');\ndevice.windowsPhone     = () => device.windows() && find('phone');\ndevice.windowsTablet    = () => device.windows() && (find('touch') && !device.windowsPhone());\ndevice.fxos             = () => (find('(mobile;') || find('(tablet;')) && find('; rv:');\ndevice.fxosPhone        = () => device.fxos() && find('mobile');\ndevice.fxosTablet       = () => device.fxos() && find('tablet');\ndevice.meego            = () => find('meego');\ndevice.cordova          = () => window.cordova && location.protocol === 'file:';\ndevice.nodeWebkit       = () => typeof window.process === 'object';\n\ndevice.mobile = () =>\n    device.androidPhone() ||\n    device.iphone() ||\n    device.ipod() ||\n    device.windowsPhone() ||\n    device.blackberryPhone() ||\n    device.fxosPhone() ||\n    device.meego();\n\ndevice.tablet = () =>\n    device.ipad() ||\n    device.androidTablet() ||\n    device.blackberryTablet() ||\n    device.windowsTablet() ||\n    device.fxosTablet();\n\ndevice.desktop = () => !device.tablet() && !device.mobile();\n\nexport default device;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/util/deviceDetector.js\n// module id = 8\n// module chunks = 0","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  return bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\nmodule.exports = bytesToUuid;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/uuid/lib/bytesToUuid.js\n// module id = 9\n// module chunks = 0","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\nvar rng;\n\nvar crypto = global.crypto || global.msCrypto; // for IE 11\nif (crypto && crypto.getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(rnds8);\n    return rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n  rng = function() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n\nmodule.exports = rng;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/uuid/lib/rng-browser.js\n// module id = 10\n// module chunks = 0","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options == 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/uuid/v4.js\n// module id = 11\n// module chunks = 0","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 12\n// module chunks = 0","import device from './util/deviceDetector';\nimport TodosListModel from './components/TodosListModel';\nimport TodosMain from './components/TodoMain';\nimport TodoAdd from './components/TodoAdd';\nimport TodosList from './components/TodosList';\nimport TodosActionsBar from './components/TodosActionsBar';\nimport appViewState from './views/AppViewState';\n\nwindow.addEventListener('DOMContentLoaded', init);\nwindow.addEventListener('keydown', handleFirstTab);\n\nfunction init() {\n  if (device.desktop()) {\n    document.body.className = 'hover';\n  }\n\n  let todosListModel = new TodosListModel();\n  const mainRoot = document.querySelector('.main-wrapper');\n  let todosMain = new TodosMain(mainRoot);\n\n  let todoAdd         = new TodoAdd(mainRoot.querySelector('.todo-add'));\n  let todosList       = new TodosList(mainRoot.querySelector('.js-todos-list'));\n  let todosActionsBar = new TodosActionsBar(mainRoot.querySelector('.todos-actions-bar'));\n\n  appViewState.onChange(data => {\n    todosList.filterShowedItems(data['filter']);\n  });\n\n  todosListModel.onChange(() => {\n    if (todosListModel.getList().length !== 0) {\n      todosMain.updateInterfaceVisibility(true);\n    } else {\n      todosMain.updateInterfaceVisibility(false);\n    }\n\n    let leftTodosCnt = todosListModel.getLeftTodosCount();\n    todosActionsBar.setLeftTodosCount(leftTodosCnt);\n\n    if (todosListModel.getList().length - leftTodosCnt > 0) {\n      todosActionsBar.manageClearCompletedVisibility(true);\n    } else {\n      todosActionsBar.manageClearCompletedVisibility(false);\n    }\n  });\n\n  todoAdd\n    .on('todoCreate', inputData => {\n      todosListModel.add(inputData);\n    })\n    .on('selectAll', () => {\n      todosListModel.selectAll();\n    });\n\n  todosListModel\n    .on('todoAdd', model => {\n      todosList.addTodo(model);\n    })\n    .on('todoRemove', model => {\n      todosList.remove(model);\n    })\n    .on('todoChange', () => {\n      todosList.filterShowedItems();\n    });\n\n  todosActionsBar\n    .on('clearCompleted', () => {\n      todosListModel.clearCompleted();\n    })\n    .on('filterSelected', filter => {\n      appViewState.setFilter(filter);\n    });\n\n  todosListModel.updateList();\n}\n\nfunction handleFirstTab(e) {\n  if (e.keyCode === 9) {\n    document.body.classList.add('user-is-tabbing');\n    window.removeEventListener('keydown', handleFirstTab);\n    window.addEventListener('mousedown', handleMouseDownOnce);\n  }\n}\n\nfunction handleMouseDownOnce() {\n  document.body.classList.remove('user-is-tabbing');\n  window.removeEventListener('mousedown', handleMouseDownOnce);\n  window.addEventListener('keydown', handleFirstTab);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/app.js\n// module id = 13\n// module chunks = 0","import extendConstructor from '../util/extendConstructor';\nimport Eventable from '../util/Eventable';\n\n/**\n * @param {HTMLElement}root\n * @constructor\n */\nexport default class Filter {\n  constructor(root) {\n    this._initEventable();\n\n    /**\n     * @type {NodeList}\n     * @private\n     */\n    this._filters = root.querySelectorAll('.filter');\n    /**\n     * @type {HTMLElement}\n     * @private\n     */\n    this._activeFilter = null;\n\n    for (let i = 0, l = this._filters.length; i < l; i++) {\n      this._filters[i].addEventListener('click', this);\n\n      if (this._filters[i].classList.contains('__active')) {\n        this._activeFilter = this._filters[i];\n      }\n    }\n  }\n\n  /**\n   * @param {HTMLElement} filter\n   * @callback handleEvent\n   * @fires Filter~filterSelect\n   * @private\n   */\n  _onSetFilter(filter) {\n    if (this._activeFilter !== filter) {\n      this._activeFilter.classList.remove('__active');\n      filter.classList.add('__active');\n\n      this._activeFilter = filter;\n      /** @event Filter#filterSelect */\n      this.trigger('filterSelect', filter.dataset.filter);\n    }\n    return this;\n  }\n\n  handleEvent(e) {\n    switch (e.type) {\n      case 'click':\n        this._onSetFilter(e.target);\n        break;\n    }\n  }\n}\n\nextendConstructor(Filter, Eventable);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/components/Filter.js\n// module id = 14\n// module chunks = 0","import extendConstructor from '../util/extendConstructor';\nimport Eventable from '../util/Eventable';\nimport templateEngine from '../util/templateEngine';\n\n/**\n * @extends {EventListener}\n * @param {TodoModel} model\n * @constructor\n */\nexport default class TodoItem {\n  constructor(model) {\n    this._initEventable();\n\n    let elem = templateEngine.todoItem({ text: model.get('text') });\n\n    this._root = elem.root;\n    this._readyMarkWrapper = elem.readyMarkWrapper;\n    /**\n     * @type {HTMLElement}\n     * @private\n     */\n    this._readyMark = elem.readyMark;\n    this._removeWrapper = elem.removeWrapper;\n    /**\n     * @type {HTMLElement}\n     * @private\n     */\n    this._remove = elem.remove;\n    this._text = elem.text;\n    /**\n     * @type {TodoModel}\n     * @public\n     */\n    this._model = model;\n\n    this._model.onChange('isReady', data => {\n      this._manageReadyModificator(data['value']);\n    }, this);\n\n    this._readyMarkWrapper.addEventListener('keypress', this);\n    this._readyMark.addEventListener('change', this);\n    this._removeWrapper.addEventListener('keypress', this);\n    this._remove.addEventListener('click', this);\n    this._text.addEventListener('blur', this);\n  }\n\n  /**\n   * @param {HTMLElement} parent\n   * @returns {TodoItem}\n   */\n  render(parent) {\n    parent.appendChild(this._root);\n    return this;\n  }\n\n  /**\n   * @callback handleEvent\n   * @param {String} newText\n   * @returns {TodoItem}\n   * @private\n   */\n  _onSetText(newText) {\n    if (this._model.get('text') !== newText) {\n      this._text.innerText = newText;\n      this._model.set('text', newText);\n    }\n    return this;\n  }\n\n  /**\n   * @param {Boolean} isReady\n   * @returns {TodoItem}\n   * @private\n   */\n  _manageReadyModificator(isReady) {\n    if (isReady) {\n      this._root.classList.add('__ready');\n    } else {\n      this._root.classList.remove('__ready');\n    }\n    this._readyMark.checked = isReady;\n    return this;\n  }\n\n  /**\n   * @param {Boolean} isReady\n   * @returns {TodoItem}\n   */\n  changeReady(isReady) {\n    if (isReady !== this._model.get('isReady')) {\n      this._model.set('isReady', isReady);\n      this._manageReadyModificator(isReady);\n      this.trigger('todoChange', this._model);\n    }\n    return this;\n  }\n\n  /**\n   * @callback handleEvent\n   * @private\n   */\n  _onRemove() {\n    this._model.set('deleted', true);\n  }\n\n  /**\n   * @returns {TodoItem}\n   */\n  remove() {\n    this._root.parentNode.removeChild(this._root);\n    return this;\n  }\n\n  /**\n   * @param {Boolean} isVisible\n   * @returns {TodoItem}\n   */\n  visible(isVisible) {\n    if (isVisible) {\n      this._root.classList.remove('__hide');\n    } else {\n      this._root.classList.add('__hide');\n    }\n    return this;\n  }\n\n  handleEvent(e) {\n    switch (e.type) {\n      case 'change':\n        this.changeReady(this._readyMark.checked);\n        break;\n      case 'click':\n        if (e.target === this._remove) {\n          this._onRemove();\n        }\n        break;\n      case 'blur':\n        this._onSetText(this._text.innerText);\n        break;\n      case 'keypress':\n        if (e.keyCode === 13) {\n          if (e.target.closest('.todo-item_ready-mark')) {\n            this._readyMark.checked = !this._readyMark.checked;\n            this.changeReady(this._readyMark.checked);\n          } else if (e.target.closest('.todo-item_remove') && e.target === this._removeWrapper) {\n            this._onRemove();\n          }\n        }\n        break;\n    }\n  }\n}\n\nextendConstructor(TodoItem, Eventable);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/components/TodoItem.js\n// module id = 15\n// module chunks = 0","import extendConstructor from '../util/extendConstructor';\nimport Eventable from '../util/Eventable';\n\n/**\n * @param {Object} data\n * @constructor\n */\nexport default class TodoModel {\n  constructor(data) {\n    this._initEventable();\n\n    this._model = {\n      id: data.id,\n      isReady: data.isReady || false,\n      text: data.text\n    };\n  }\n\n  /**\n   * @param {String} field\n   * @param {*} value\n   * @fires TodoModel#modelFieldChange\n   * @returns {TodoModel}\n   */\n  set(field, value) {\n    this._model[field] = value;\n    /** @event TodoModel~modelFieldChange */\n    this.trigger('modelFieldChange', { field: field, value: value });\n\n    return this;\n  }\n\n  /**\n   * @param {String} field\n   * @returns {*}\n   */\n  get(field) {\n    return this._model[field];\n  }\n\n  /**\n   * @param {String} field\n   * @param {Function} handler\n   * @param {Object} [ctx]\n   * @returns {TodoModel}\n   */\n  onChange(field, handler, ctx) {\n    this.on('modelFieldChange', data => {\n      if (data.field === field) {\n        handler.call(ctx, data);\n      }\n    }, this);\n\n    return this;\n  }\n\n  /**\n   * @param {Function} handler\n   * @param {Object} [ctx]\n   * @returns {TodoModel}\n   */\n  onAnyChange(handler, ctx) {\n    this.on('modelFieldChange', data => {\n      handler.call(ctx, data);\n      this.trigger('modelChange', this);\n    }, this);\n\n    return this;\n  }\n}\n\nextendConstructor(TodoModel, Eventable);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/components/TodoModel.js\n// module id = 16\n// module chunks = 0","import local from './local';\n\nexport default class Storage {\n  constructor() {\n    this.KEY = 'TODOS';\n  }\n\n  getEntriesList() {\n    let list;\n\n    return new Promise((resolve, reject) => {\n      list = local.read(this.KEY);\n      if (list) {\n        resolve(list.data);\n      }\n      reject();\n    });\n  }\n\n  putEntriesList(data) {\n    const entry = {\n      time: new Date().getTime(),\n      data\n    };\n\n    return !!local.write(this.KEY, entry);\n  }\n\n  addListItem(item) {\n    const now = new Date().getTime();\n    let entry = local.read(this.KEY);\n\n    if (!entry) {\n      local.write(this.KEY, {\n        time: now,\n        data: []\n      });\n      entry = local.read(this.KEY);\n    }\n\n    entry.time = now;\n    entry.data.push(item);\n\n    return !!local.write(this.KEY, entry);\n  }\n\n  removeListItem(itemId) {\n    const entry = local.read(this.KEY);\n\n    if (entry) {\n      for (let i = 0, l = entry.data.length; i < l; i++) {\n        if (entry.data[i].id === itemId) {\n          entry.data.splice(i, 1);\n          break;\n        }\n      }\n\n      if (local.write(this.KEY, entry)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  changeListItem(item) {\n    const entry = local.read(this.KEY);\n\n    if (entry) {\n      for (let i = 0, l = entry.data.length; i < l; i++) {\n        if (entry.data[i].id === item.id) {\n          entry.data[i] = item;\n          break;\n        }\n      }\n\n      if (local.write(this.KEY, entry)) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/models/Storage.js\n// module id = 17\n// module chunks = 0","const local = (function () {\n  function create(key) {\n    if (typeof Storage !== 'undefined') {\n      const entry = {\n        time: null,\n        data: []\n      };\n      localStorage.setItem(key, JSON.stringify(entry));\n      return true;\n    }\n    return false;\n  }\n\n  function read(key) {\n    if (typeof Storage !== 'undefined') {\n      return JSON.parse(localStorage.getItem(key));\n    }\n    return null;\n  }\n\n  function write(key, data) {\n    if (typeof Storage !== 'undefined') {\n      localStorage.setItem(key, JSON.stringify(data));\n      return true;\n    }\n    return false;\n  }\n\n  function clear(key) {\n    if (typeof Storage !== 'undefined') {\n      localStorage.removeItem(key);\n      return true;\n    }\n    return false;\n  }\n\n  return {\n    read,\n    write,\n    create,\n    clear\n  };\n}());\n\nexport default local;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/models/local.js\n// module id = 18\n// module chunks = 0","let elem = document.createElement('div');\n\nfunction getTemplateRootNode(scriptId) {\n  const script = document.getElementById(scriptId);\n  elem.innerHTML = script.innerHTML;\n\n  const result = elem.children[0];\n  elem.removeChild(result);\n\n  return result;\n}\n\nconst templateEngine = {\n  todoItem: function (data) {\n    const root = getTemplateRootNode('todoItemTemplate');\n    const readyMarkWrapper = root.querySelector('.todo-item_ready-mark');\n    const readyMark = root.querySelector('.js-todo-item_ready-mark');\n    const removeWrapper = root.querySelector('.todo-item_remove');\n    const remove = root.querySelector('.js-todo-item_remove');\n    const text = root.querySelector('.js-todo-item_text');\n\n    if (data.text) {\n      text.innerText = data.text;\n    }\n\n    if (data.isReady) {\n      readyMark.checked = true;\n    }\n\n    return {\n      root,\n      text,\n      readyMarkWrapper,\n      readyMark,\n      removeWrapper,\n      remove\n    };\n  }\n};\n\nexport default templateEngine;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/js/util/templateEngine.js\n// module id = 19\n// module chunks = 0"],"sourceRoot":""}